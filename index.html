<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Crosshair Overlay - iOS</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            background: transparent;
            overflow: hidden;
            touch-action: none;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            user-select: none;
        }
        
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 2147483647;
        }
        
        .crosshair {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 30px;
            height: 30px;
        }
        
        .crosshair::before,
        .crosshair::after {
            content: '';
            position: absolute;
            background: #00ff00;
            box-shadow: 0 0 3px rgba(0, 0, 0, 0.8);
        }
        
        .crosshair::before {
            width: 2px;
            height: 100%;
            left: 50%;
            transform: translateX(-50%);
        }
        
        .crosshair::after {
            width: 100%;
            height: 2px;
            top: 50%;
            transform: translateY(-50%);
        }
        
        .center-dot {
            width: 3px;
            height: 3px;
            background: #ff0000;
            border-radius: 50%;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }
        
        .controls {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 15px;
            border-radius: 10px;
            font-size: 14px;
            pointer-events: auto;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }
        
        .controls h3 {
            margin-bottom: 10px;
            font-size: 16px;
        }
        
        .controls label {
            display: block;
            margin: 8px 0;
            font-size: 12px;
        }
        
        .controls input {
            margin-left: 5px;
        }
        
        .instructions {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 15px;
            border-radius: 10px;
            font-size: 12px;
            max-width: 280px;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }
        
        .hide-controls {
            position: fixed;
            top: 10px;
            left: 10px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 10px;
            border-radius: 5px;
            font-size: 12px;
            pointer-events: auto;
            z-index: 2147483647;
        }
        
        .hidden {
            display: none;
        }
        
        /* Para funcionar melhor no iOS */
        @supports (-webkit-touch-callout: none) {
            .controls, .instructions {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="overlay">
        <div class="crosshair">
            <div class="center-dot"></div>
        </div>
    </div>
    
    <button class="hide-controls" onclick="toggleControls()">üëÅÔ∏è Mostrar/Ocultar</button>
    
    <div class="controls" id="controls">
        <h3>‚öôÔ∏è Configura√ß√µes</h3>
        <label>
            Cor:
            <input type="color" id="colorPicker" value="#00ff00">
        </label>
        <label>
            Tamanho:
            <input type="range" id="sizeSlider" min="15" max="50" value="30">
            <span id="sizeValue">30</span>px
        </label>
        <label>
            Espessura:
            <input type="range" id="thicknessSlider" min="1" max="5" value="2">
            <span id="thicknessValue">2</span>px
        </label>
        <label>
            Opacidade:
            <input type="range" id="opacitySlider" min="0.3" max="1" step="0.1" value="1">
            <span id="opacityValue">100</span>%
        </label>
        <label>
            <input type="checkbox" id="centerDot" checked> Ponto central
        </label>
        <label>
            <input type="checkbox" id="lockPosition"> Travar posi√ß√£o
        </label>
    </div>
    
    <div class="instructions" id="instructions">
        <strong>üì± Como usar no iOS:</strong><br>
        1. Toque duas vezes para tela cheia<br>
        2. Use o bot√£o "üëÅÔ∏è" para ocultar controles<br>
        3. Ajuste as configura√ß√µes<br>
        4. Ative "Travar posi√ß√£o" para evitar movimento<br>
        5. Use o app switcher para manter vis√≠vel<br>
        <br>
        <strong>üí° Dica:</strong> Adicione √† tela inicial para uso r√°pido
    </div>

    <script>
        const crosshair = document.querySelector('.crosshair');
        const centerDot = document.querySelector('.center-dot');
        const colorPicker = document.getElementById('colorPicker');
        const sizeSlider = document.getElementById('sizeSlider');
        const thicknessSlider = document.getElementById('thicknessSlider');
        const opacitySlider = document.getElementById('opacitySlider');
        const centerDotCheckbox = document.getElementById('centerDot');
        const lockPositionCheckbox = document.getElementById('lockPosition');
        
        let isDragging = false;
        let startX, startY, initialX, initialY;
        
        function updateCrosshair() {
            const size = sizeSlider.value;
            const thickness = thicknessSlider.value;
            const color = colorPicker.value;
            const opacity = opacitySlider.value;
            
            crosshair.style.width = size + 'px';
            crosshair.style.height = size + 'px';
            
            const style = document.createElement('style');
            style.textContent = `
                .crosshair::before, .crosshair::after {
                    background: ${color};
                    opacity: ${opacity};
                }
                .crosshair::before {
                    width: ${thickness}px;
                    height: ${size}px;
                }
                .crosshair::after {
                    width: ${size}px;
                    height: ${thickness}px;
                }
                .center-dot {
                    background: ${color};
                    opacity: ${opacity};
                }
            `;
            
            document.head.appendChild(style);
            
            centerDot.style.display = centerDotCheckbox.checked ? 'block' : 'none';
            
            document.getElementById('sizeValue').textContent = size;
            document.getElementById('thicknessValue').textContent = thickness;
            document.getElementById('opacityValue').textContent = Math.round(opacity * 100);
        }
        
        function toggleControls() {
            const controls = document.getElementById('controls');
            const instructions = document.getElementById('instructions');
            controls.classList.toggle('hidden');
            instructions.classList.toggle('hidden');
        }
        
        // Event listeners
        colorPicker.addEventListener('input', updateCrosshair);
        sizeSlider.addEventListener('input', updateCrosshair);
        thicknessSlider.addEventListener('input', updateCrosshair);
        opacitySlider.addEventListener('input', updateCrosshair);
        centerDotCheckbox.addEventListener('change', updateCrosshair);
        
        // Touch events for iOS
        crosshair.addEventListener('touchstart', (e) => {
            if (!lockPositionCheckbox.checked) {
                isDragging = true;
                const touch = e.touches[0];
                startX = touch.clientX;
                startY = touch.clientY;
                const rect = crosshair.getBoundingClientRect();
                initialX = rect.left;
                initialY = rect.top;
            }
        });
        
        crosshair.addEventListener('touchmove', (e) => {
            if (isDragging && !lockPositionCheckbox.checked) {
                e.preventDefault();
                const touch = e.touches[0];
                const deltaX = touch.clientX - startX;
                const deltaY = touch.clientY - startY;
                
                crosshair.style.transform = `translate(${deltaX}px, ${deltaY}px)`;
            }
        });
        
        crosshair.addEventListener('touchend', () => {
            isDragging = false;
        });
        
        // Double tap for fullscreen
        document.addEventListener('dblclick', () => {
            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen();
            } else {
                document.exitFullscreen();
            }
        });
        
        // Prevent zoom on iOS
        document.addEventListener('gesturestart', (e) => {
            e.preventDefault();
        });
        
        // Initialize
        updateCrosshair();
        
        // Save settings to localStorage
        const inputs = [colorPicker, sizeSlider, thicknessSlider, opacitySlider, centerDotCheckbox, lockPositionCheckbox];
        inputs.forEach(input => {
            const saved = localStorage.getItem(input.id);
            if (saved) {
                if (input.type === 'checkbox') {
                    input.checked = saved === 'true';
                } else {
                    input.value = saved;
                }
            }
            input.addEventListener('change', () => {
                localStorage.setItem(input.id, input.type === 'checkbox' ? input.checked : input.value);
                updateCrosshair();
            });
        });
        
        // Add to home screen prompt
        if ('standalone' in window.navigator && !window.navigator.standalone) {
            setTimeout(() => {
                alert('üí° Dica: Toque no bot√£o "Compartilhar" e depois "Adicionar √† Tela Inicial" para usar como app!');
            }, 2000);
        }
    </script>
</body>
</html>
